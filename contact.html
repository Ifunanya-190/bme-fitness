<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>BME Training System</title>
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/contact.css">
<link rel="stylesheet" href="css/dropdown.css">
<link rel="stylesheet" href="mobile-fixes.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<!-- NAVBAR -->
<header class="navbar">
<div class="container nav-flex">

<div class="logo">BME FITNESS</div>

<div class="menu-toggle" id="menu-toggle">
    ☰
</div>

<nav class="nav-links" id="nav-links">
<a href="index.html">Home</a>
<a href="about.html">About</a>
<a href="services.html">Training</a>
<a href="pricing.html">Pricing</a>
<a href="transformations.html">Results</a>
<a href="trainers.html">Trainers</a>
<a href="schedule.html">Schedule</a>
<a href="contact.html">Contact</a>
<a href="login.html" class="btn">Sign Up</a>
<a href="https://wa.me/2349012345678?text=I'm%20interested%20in%20BME%20Services" class="whatsapp-nav">WhatsApp</a>
</nav>
</div>
</header>



<section>
<div class="container">
<div class="section-title">
<h2>Contact BME</h2>
<p>Begin your transformation</p>
</div>

<div class="contact-grid">
    <!-- Contact Info -->
    <div class="contact-info-section">
        <h3>Get in Touch</h3>
        <div class="contact-info-display">
            <div class="contact-item">
                <svg class="contact-icon" viewBox="0 0 24 24">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
                <div class="contact-details">
                    <strong>Email:</strong><br>
                    <a href="mailto:info@bmefitness.com">info@bmefitness.com</a>
                </div>
            </div>
            <div class="contact-item">
                <svg class="contact-icon" viewBox="0 0 24 24">
                    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                </svg>
                <div class="contact-details">
                    <strong>Call:</strong><br>
                    <a href="tel:+2349012345678">+234 9012345678</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Form -->
    <div class="contact-form-section">
        <h3>Send us a Message</h3>
        
        <!-- Form for Logged In Users -->
        <div id="userContactForm" style="display: none;">
            <div class="user-info-display">
                <p><strong>From:</strong> <span id="userDisplayName"></span> (<span id="userEmail"></span>)</p>
            </div>
            <div class="form-group">
                <label for="userMessage">Your Message</label>
                <textarea id="userMessage" placeholder="Type your message here..." rows="5" required></textarea>
            </div>
            <button type="button" class="btn" onclick="sendUserMessage()">Send Message</button>
        </div>

        <!-- Form for Non-Logged In Users -->
        <div id="guestContactForm">
            <form id="contactForm" onsubmit="sendGuestMessage(event)">
                <div class="form-group">
                    <label for="guestName">Your Name</label>
                    <input type="text" id="guestName" name="name" placeholder="Your Name" required>
                </div>
                <div class="form-group">
                    <label for="guestEmail">Email Address</label>
                    <input type="email" id="guestEmail" name="email" placeholder="Email Address" required>
                </div>
                <div class="form-group">
                    <label for="guestSubject">Subject (Optional)</label>
                    <input type="text" id="guestSubject" name="subject" placeholder="What's this about?">
                </div>
                <div class="form-group">
                    <label for="guestMessage">Your Message</label>
                    <textarea id="guestMessage" name="message" placeholder="Your Message" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn">Send Message</button>
            </form>
        </div>
    </div>
</div>
</div>
</section>

<script>
// Check user login status and show appropriate form
document.addEventListener('DOMContentLoaded', function() {
    console.log('Contact page loaded');
    
    // Listen for auth state changes
    firebase.auth().onAuthStateChanged(function(user) {
        console.log('Auth state changed:', user ? 'User logged in' : 'User not logged in');
        
        const userForm = document.getElementById('userContactForm');
        const guestForm = document.getElementById('guestContactForm');
        
        console.log('User form found:', !!userForm);
        console.log('Guest form found:', !!guestForm);
        
        if (user) {
            // User is logged in - show user form
            console.log('Showing user form for:', user.email);
            if (userForm) {
                userForm.style.display = 'block';
                document.getElementById('userDisplayName').textContent = user.displayName || user.email.split('@')[0] || 'User';
                document.getElementById('userEmail').textContent = user.email;
            }
            if (guestForm) guestForm.style.display = 'none';
        } else {
            // User is not logged in - show guest form
            console.log('Showing guest form');
            if (guestForm) guestForm.style.display = 'block';
            if (userForm) userForm.style.display = 'none';
        }
    });
});

function sendUserMessage() {
    const user = firebase.auth().currentUser;
    if (!user) {
        alert('Please sign in first');
        return;
    }
    
    const message = document.getElementById('userMessage').value;
    const subject = 'Contact Form Message';
    
    if (!message.trim()) {
        alert('Please enter a message');
        return;
    }
    
    // Create mailto link with user info
    const emailSubject = encodeURIComponent(`[${user.displayName || 'User'}] ${subject}`);
    const emailBody = encodeURIComponent(
        `Name: ${user.displayName || 'User'}\n` +
        `Email: ${user.email}\n` +
        `User ID: ${user.uid}\n` +
        `Membership Status: Free\n\n` +
        `Message:\n${message}`
    );
    
    window.location.href = `mailto:info@bmefitness.com?subject=${emailSubject}&body=${emailBody}`;
    
    // Clear form after sending
    document.getElementById('userMessage').value = '';
    
    // Show success message
    setTimeout(() => {
        alert('Message sent successfully! We will get back to you soon.');
    }, 500);
}

function sendGuestMessage(event) {
    event.preventDefault();
    
    const name = document.getElementById('guestName').value;
    const email = document.getElementById('guestEmail').value;
    const subject = document.getElementById('guestSubject').value || 'Contact Form Message';
    const message = document.getElementById('guestMessage').value;
    
    if (!name.trim() || !email.trim() || !message.trim()) {
        alert('Please fill in all required fields');
        return;
    }
    
    // Create mailto link with guest info
    const emailSubject = encodeURIComponent(`[Guest] ${subject}`);
    const emailBody = encodeURIComponent(
        `Name: ${name}\n` +
        `Email: ${email}\n` +
        `Type: Guest User\n\n` +
        `Message:\n${message}`
    );
    
    window.location.href = `mailto:info@bmefitness.com?subject=${emailSubject}&body=${emailBody}`;
    
    // Clear form after sending
    document.getElementById('contactForm').reset();
    
    // Show success message
    setTimeout(() => {
        alert('Message sent successfully! We will get back to you soon.');
    }, 500);
}
</script>

<!-- UNIVERSAL MOBILE MENU SCRIPT -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Contact page - DOM loaded - testing menu');
    
    const toggle = document.getElementById('menu-toggle');
    const nav = document.getElementById('nav-links');
    
    console.log('Contact page - Toggle element:', toggle);
    console.log('Contact page - Nav element:', nav);
    
    if (toggle && nav) {
        console.log('Contact page - Elements found - adding click handler');
        
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Contact page - Menu clicked!');
            nav.classList.toggle('active');
            
            if (nav.classList.contains('active')) {
                toggle.innerHTML = '×';
                document.body.style.overflow = 'hidden';
                console.log('Contact page - Menu opened');
            } else {
                toggle.innerHTML = '☰';
                document.body.style.overflow = '';
                console.log('Contact page - Menu closed');
            }
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!toggle.contains(e.target) && !nav.contains(e.target)) {
                nav.classList.remove('active');
                toggle.innerHTML = '☰';
                document.body.style.overflow = '';
                console.log('Contact page - Menu closed by outside click');
            }
        });
    } else {
        console.error('Contact page - Menu elements not found!');
    }
});
</script>

</body>
</html>

